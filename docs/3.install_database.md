# Install database
    MariaDB
        Ubuntu
            sudo apt install software-properties-common dirmngr apt-transport-https 
	        sudo apt-key adv --fetch-keys 'https://mariadb.org/mariadb_release_signing_key.asc' 
	        sudo add-apt-repository 'deb [arch=amd64,arm64,ppc64el] https://atl.mirrors.knownhost.com/mariadb/repo/10.8/ubuntu jammy main' 
	        sudo apt update 
	        sudo apt install mariadb-server 
            --accept remote connections
            sudo cp /etc/mysql/mariadb.conf.d/50-server.cnf /etc/mysql/mariadb.conf.d/50-server.cnf.bkp
	        sudo vi /etc/mysql/mariadb.conf.d/50-server.cnf 
	        --set bind-address = 0.0.0.0
	        sudo systemctl restart mariadb
            --firewall
	        sudo firewall-cmd --zone=public --permanent --add-port=3306/tcp
	        sudo firewall-cmd --reload
        
            --set admin password
            sudo mysql -u root

        Windows
            --download from https://mariadb.com/downloads/
            mysql -u root
        
        --in mysql/mariadb:
        ALTER USER 'root'@'localhost' IDENTIFIED BY 'PASSWORD';
        --alternative
        ALTER USER 'root'@'localhost' IDENTIFIED VIA mysql_native_password USING PASSWORD('PASSWORD');
        --remote access
        CREATE USER 'root'@'%' identified by 'PASSWORD';
        GRANT ALL PRIVILEGES ON *.* to 'root'@'%' WITH GRANT OPTION;


    MySQL
        Ubuntu
        sudo apt install mysql-server
        sudo systemctl start mysql.service

        --if using both MariaDB and MySQL on same server use different path to mysql
        mysql -uroot -p
        ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'PASSWORD';

        --remote access
        CREATE USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'PASSWORD';
        GRANT ALL PRIVILEGES ON *.* to 'root'@'%' WITH GRANT OPTION;

        --accept remote connections
        sudo cp /etc/mysql/mysql.conf.d/mysqld.cnf /etc/mysql/mysql.conf.d/mysqld.cnf.bkp
        sudo vi /etc/mysql/mysql.conf.d/mysqld.cnf
        --set bind-address = 0.0.0.0
            
        --firewall
        --if using both MariaDB and MySQL on same server use different ports
        sudo firewall-cmd --zone=public --permanent --add-port=3306/tcp
	    sudo firewall-cmd --reload

        Windows
        --download from https://dev.mysql.com/downloads/mysql/

    PostgreSQL
        Ubuntu
            --install v 14
            sudo apt install postgresql

            --install v 15.X
            sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
	        wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
	        --edit if necessary for arm64 platform or skip edit
            sudo vi /etc/apt/sources.list.d/pgdg.list
    		    add [arch=arm64]: deb [arch=arm64] http://apt.postgresql.org/pub/repos/apt jammy-pgdg main
	        sudo apt-get update
	        sudo apt-get -y install postgresql
            sudo systemctl start postgresql.service

            --set admin password
            sudo -i -u postgres
            psql
            ALTER USER postgres PASSWORD 'PASSWORD';

            --remote access
            sudo cp /etc/postgresql/15/main/postgresql.conf /etc/postgresql/15/main/postgresql.conf.bkp
	        sudo vi /etc/postgresql/15/main/postgresql.conf
	        --edit
    	        #listen_addresses = 'localhost'
	        --with
    	        #listen_addresses = '*'

	        sudo cp /etc/postgresql/15/main/pg_hba.conf /etc/postgresql/15/main/pg_hba.conf.bkp
	        sudo vi /etc/postgresql/15/main/pg_hba.conf
	        --edit	
    	        host    all             all             127.0.0.1/32            scram-sha-256
	        --with
    	        host    all             all             0.0.0.0/0            	scram-sha-256

            --firewall
            sudo firewall-cmd --zone=public --permanent --add-port=5432/tcp
	        sudo firewall-cmd --reload

        Windows
            --download from https://www.postgresql.org/download/windows/
            psql
            ALTER USER postgres PASSWORD 'PASSWORD';
    Oracle
        Ubuntu
        --No local database installation support, recommend to use Oracle Cloud
        --Oracle Instant Client for NodeJS, arm64 example
        sudo apt install unzip
        cd $HOME
        wget https://download.oracle.com/otn_software/linux/instantclient/191000/instantclient-basic-linux.arm64-19.10.0.0.0dbru.zip
	    wget https://download.oracle.com/otn_software/linux/instantclient/191000/instantclient-sqlplus-linux.arm64-19.10.0.0.0dbru.zip
	    wget https://download.oracle.com/otn_software/linux/instantclient/191000/instantclient-tools-linux.arm64-19.10.0.0.0dbru.zip
        unzip instantclient-basic-linux.arm64-19.10.0.0.0dbru.zip
        unzip instantclient-sqlplus-linux.arm64-19.10.0.0.0dbru.zip
        unzip instantclient-tools-linux.arm64-19.10.0.0.0dbru.zip
        cd instantclient_19_10
        sudo apt -y install patchelf
	    patchelf --set-interpreter /lib/ld-linux-aarch64.so.1 sqlplus
	    patchelf --set-interpreter /lib/ld-linux-aarch64.so.1 adrci
	    patchelf --set-interpreter /lib/ld-linux-aarch64.so.1 exp
	    patchelf --set-interpreter /lib/ld-linux-aarch64.so.1 expdp
	    patchelf --set-interpreter /lib/ld-linux-aarch64.so.1 genezi
	    patchelf --set-interpreter /lib/ld-linux-aarch64.so.1 imp
	    patchelf --set-interpreter /lib/ld-linux-aarch64.so.1 impdp
	    patchelf --set-interpreter /lib/ld-linux-aarch64.so.1 sqlldr
	    patchelf --set-interpreter /lib/ld-linux-aarch64.so.1 sqlplus
	    patchelf --set-interpreter /lib/ld-linux-aarch64.so.1 uidrvci
	    patchelf --set-interpreter /lib/ld-linux-aarch64.so.1 wrc
        mkdir $HOME/app_portfolio/config/oracle_instantclient
        mkdir $HOME/app_portfolio/config/oracle_instantclient/network
        mkdir $HOME/app_portfolio/config/oracle_instantclient/network/admin
        cp * $HOME/app_portfolio/config/oracle_instantclient
        sudo sh -c "echo $HOME/app_portfolio/config/oracle_instantclient > /etc/ld.so.conf.d/oracle-instantclient.conf"
	    sudo ldconfig
        --download wallet.zip from Oracle Cloud
        unzip wallet.zip $HOME/app_portfolio/config/oracle_instantclient/network/admin
        --edit DIRECTORY in sqlnet.ora ${HOME}/app_portfolio/config/oracle_instantclient/network/admin
        --serverparameters for Oracle Client to be set in later step (set full path without variables):
            DB4_LIBDIR=[$HOME/app_portfolio/config/oracle_instantclient]
            DB4_CONFIGDIR=[$HOME/app_portfolio/config/oracle_instantclient/network/admin]
        
        Windows
        --no local database support, recommend to use Oracle Cloud
        --Oracle Instant Client for NodeJS
        --download from https://www.oracle.com/database/technologies/instant-client/winx64-64-downloads.html
        --copy files to %HOMEPATH%\app_portfolio\config\oracle_instantclient
        --download wallet.zip from Oracle Cloud
        unzip wallet.zip %HOMEPATH%\app_portfolio\config\oracle_instantclient\network\admin
        --edit DIRECTORY in sqlnet.ora ${HOMEPATH}\app_portfolio\config\oracle_instantclient\network\admin
        --serverparameters for Oracle Client to be set in later step (set full path without variables):
            DB4_LIBDIR=[%HOMEPATH%\app_portfolio\config\oracle_instantclient]
            DB4_CONFIGDIR=[%HOMEPATH%\app_portfolio\config\oracle_instantclient\network\admin]

# Install database scripts
    Install from admin app or manually:
    --concatenate files to save time
    Ubuntu
        cd $HOME/app_portfolio
        cat /scripts/5.db_all_lang_*.sql > /scripts/5.db_all_lang.sql
        cat /apps/admin/scripts/2.db_all_app*.sql > /apps/admin/scripts/2.db_all_app.sql
        cat /apps/app1/scripts/2.db_all_app*.sql > /apps/app1/scripts/2.db_all_app.sql
        cat /apps/app2/scripts/2.db_all_app*.sql > /apps/app2/scripts/2.db_all_app.sql
        cat /apps/app3/scripts/2.db_all_app*.sql > /apps/app3/scripts/2.db_all_app.sql
    Windows
        cd %HOMEPATH%\app_portfolio
        type /scripts/5.db_all_lang_*.sql> /scripts/5.db_all_lang.sql
        type /apps/app2/scripts/2.db_all_app*.sql> /apps/app2/scripts/2.db_all_app.sql
        type /apps/app3/scripts/2.db_all_app*.sql> /apps/app3/scripts/2.db_all_app.sql        

    --syntax to run script with unicode parameter
        MariaDB
            mariadb -uroot -p -h localhost app_portfolio --default-character-set=utf8mb4 <[SCRIPT]
        MySQL
            mysql -uroot -p -h localhost app_portfolio --default-character-set=utf8mb4 <[SCRIPT]
        PostgreSQL
            set PGCLIENTENCODING=UTF8
            psql -U postgres -h localhost -d app_portfolio -f 5.db_all.sql
        Oracle 
            --run script in SQLDeveloper or DBeaver
            --from Linux (Ubuntu not supported)
            export LD_LIBRARY_PATH={PATH}
            export PATH={PATH}
            export ORACLE_HOME={PATH}
            export NLS_LANG=AMERICAN_AMERICA.AL32UTF8
            export TNS_ADMIN={PATH}
            sqlplus admin@{TNS_STRING}
            SET DEFINE OFF
            SET AUTOCOMMIT ON
            @[SCRIPT]

    --replace [SCRIPT] with script below and run in this order as root or admin/dba:
    MariaDB    
        /scripts/1.db_1_create_db.ddl
        /scripts/2.db_1_2_datamodel.ddl
        /scripts/3.db_1_grant_role_fix.ddl
        /scripts/4.db_all_insert_data.sql			(creates admin as superadmin user)
        /scripts/4.db_1_parameter_secret.sql
        /scripts/5.db_all_lang.sql					(concatenated script)

    MySQL
        /scripts/1.db_1_create_db.ddl 			
        /scripts/2.db_1_2_datamodel.ddl 	
        /scripts/3.db_1_grant_role_fix.ddl		
        /scripts/4.db_all_insert_data.sql			(creates admin as superadmin user)
        /scripts/4.db_1_parameter_secret.sql	
        /scripts/5.db_all_lang.sql					(concatenated script)

    PostgreSQL
        /scripts/1.db_3_create_db.ddl
        /scripts/2.db_3_datamodel.ddl
        /scripts/4.db_all_insert_data.sql			(creates admin as superadmin user)
        /scripts/4.db_3_parameter_secret.sql	
        /scripts/5.db_all_lang.sql					(concatenated script)

    Oracle
        /scripts/2.db_4_datamodel.ddl
        /scripts/4.db_all_insert_data.sql			(creates admin as superadmin user)
        /scripts/4.db_4_parameter_secret.sql
        /scripts/5.db_all_lang.sql					(concatenated script)

    --app scripts for all databases:
    /apps/admin/scripts/1.db_all_app.sql        admin data
    /apps/admin/scripts/2.db_all_app.sql        admin translations (concatenated script)

    /apps/app1/scripts/1.db_all_app.sql         app 1 data
    /apps/app1/scripts/2.db_all_app.sql         app 1 translations (concatenated script)

    /apps/app2/scripts/1.db_all_app.sql         app 2 data
    /apps/app2/scripts/2.db_all_app.sql         app 2 translations (concatenated script)

    /apps/app3/scripts/1.db_all_app.sql         app 3 data
    /apps/app3/scripts/2.db_all_app.sql         app 3 translations (concatenated script)

    Uninstall
    MariaDB, MySQL
        drop database app_portfolio;
        drop user app_portfolio;
    
    PostgreSQL
        drop database app_portfolio;
        drop user app_portfolio;
    Oracle
        drop user app_portfolio cascade;

    and in all databases:
        drop user app1;
        drop user app2;
        drop user app3;
        drop user app_admin;
        drop role role_app_admin;
        drop role role_app_common;
        drop role role_app_dba;

# Info users and roles
    USER CREATED		ROLE AND APP_ID INFO
    ------------		--------------------
    app_portfolio		role ROLE_APP_DBA
                        database user, do not use in app,
                        use app users with less privileges for a more secure app

    app_admin			role ROLE_APP_ADMIN
                        app admin in app
                        DELETE/INSERT/SELECT/UPATE all tables, but no DDL
    app1				role ROLE_APP_COMMON
                        app_id=1

    app2 				role ROLE_APP_COMMON
                        app_id=2

    app3 				role ROLE_APP_COMMON
                        app_id=3