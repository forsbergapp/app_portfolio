# Installation server without Terrraform

> **Note:** SKIP if using Terrraform

Azure
1. create Linux Virtual Machine (VM), save public key and note public IP addres of server
2. connect to Linux VM from localhost from command prompt:

```
ssh -i $HOME/.ssh/[KEY_FILE] [azureuser]@[IP ADDRESS]
```

Oracle Cloud
1. choose compute then instance and choose Linux shape and desired version, save public key and note public IP addres of server
2. connect to Linux VM from localhost for example from command prompt:

```
ssh -i $HOME/.ssh/[KEY_FILE] [user]@[IP ADDRESS]
```

```
sudo apt update -y
sudo apt upgrade -y
sudo curl -sL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt install -y git vim inetutils-ping net-tools ufw nodejs
sudo setcap CAP_NET_BIND_SERVICE=+eip /usr/bin/node
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw allow 3333/tcp
sudo ufw --force enable
sudo apt remove --purge -y update-notifier-common
sudo apt remove --purge -y ubuntu-release-upgrader-core
sudo apt remove --purge -y popularity-contest
sudo apt remove --purge -y apport
sudo apt remove --purge -y whoopsie
sudo apt remove --purge -y friendly-recovery
sudo apt remove --purge -y command-not-found
sudo apt remove --purge -y man-db
sudo apt remove --purge -y vim-tiny
sudo apt remove --purge -y nano
sudo apt remove --purge -y rsyslog
sudo apt -y autoremove --purge
sudo -i -u ubuntu git clone ${var.git_repository_url} app_portfolio
sudo systemctl enable $HOME/app_portfolio/server/scripts/app_portfolio.service
sudo systemctl enable $HOME/app_portfolio/server/scripts/app_portfolio_microservice_batch.service
sudo systemctl daemon-reload
sudo systemctl start app_portfolio.service
sudo systemctl start app_portfolio_microservice_batch.service
```     

alternative Git installation that copies all branches:

```
cd $HOME
git clone --bare [repository .git url] .git
git config --bool core.bare false
git reset --hard
git branch
```     

check ports

```
sudo netstat -ltn
or
sudo ss -ltn
```
**Azure**
**Network settings**
| Add inbound rules      |                                    |
| :--------------------- | :--------------------------------- |
| Choose service HTTP    | (port 3000 or standard 80)         |

| Add inbound rules      |                                    | 
| :--------------------- | :--------------------------------- |
| Choose service HTTPS   | (port 443)                         |

| Add inbound rules      |                                    |
| :--------------------- | :--------------------------------- |
| Choose service HTTP    | (port 3333)                        |

        
**Oracle Cloud**
**Security list**
| Add ingress rules      |                                    | 
| :--------------------- | :--------------------------------- |
| source                 | 0.0.0.0/0                          |
| destination port       | 3000 or standard 80                |
| description            | HTTP                               |

| Add ingress rules      |                                    | 
| :--------------------- | :--------------------------------- |
| source                 | 0.0.0.0/0                          |
| destination port       | 443                                |
| description            | HTTPS not used but browser hangs if not enabled |

| Add ingress rules      |                                    | 
| :--------------------- | :--------------------------------- |
| source                 | 0.0.0.0/0                          |
| destination port       | 3333                               |
| description            | HTTP Admin                         |

If no route to host error or other network issues:
```
sudo reboot
```