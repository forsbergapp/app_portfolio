# OWASP

App Portfolio implements OWASP Application Security Verification Standard (ASVS) v 5.0.0.
Chapter separated tables show all v5.0.0 requirements with level and status
See more at https://owasp.org and https://github.com/OWASP/ASVS

**V1 Encoding and Sanitization**
|{#2kv}Requirement|Level|Status|
|:----------|:----|:-----|
|1.1.1      |2	  |**Implemented**, in this order: client controls input, encodes and encrypts in FFB, BFF decrypts, decodes and controls input and all once|
|1.1.2		|2	  |**Implemented**, client application encodes and encrypts as final step|
|1.2.1		|1	  |**Implemented**, all HTTP responses return encrypted JSON REST API or HTML for intial app start response and all response supporting Unicode|
|1.2.2		|1	  |**Implemented**, all requests are encrypted and use base64 encoding. Uses protocol HTTP with own developed custom Web Crypto API pattern and not HTTPS exposing info to third parties. Style tag in divs use url (data:..) syntax result from encrypted REST API. Specificaion does not explain why "data:" is not safe and provides no example of how it would be unsafe or why it would be less safe than other protocols.|
|1.2.3      |1    |**Implemented**, uses base64, TextDecoder, TextEncoder, encodeURIComponent and decodeURIComponent, tree shaking pattern and input validation both in apps and in server.|
|1.2.4      |1    |**Implemented**, uses ORM pattern with tree shaking pattern with OpenApi and IAM that controls requests|
|1.2.5      |1    |**Implemented**, OS commands excecuted from server batch job definitions not accessed by apps. OS info commands uses closure pattern so external functions can not access os commands directly.|
|1.2.6      |2    |**Not aplicable**. LDAP not implemented.|
|1.2.7      |2    |**Implemented**, uses tree shaking pattern and OpenApi with parameter authentication. ORM database uses parameters in functions.|
|1.2.8      |2    |**Not aplicable**. LaTeX processor not implemented.|
|1.2.9      |2    |**Implemented**. Uses backslashes or HTML entities when applicable.|
|1.2.10     |3    |**Not aplicable**. No exports of CSV. CSV only used in server for server function databases.|
|1.3.1      |1    |**Implemented**. Uses TextContent for input from divs to avoid HTML input, semantic HTML is replaced by pure divs to avoid obscure browser functionality, uses SFC pattern separating HTML, CSS and Javascript without using browser DOM functions and cleans up code switching frameworks between Vue, React and pure Javascript. Uses tree shaking pattern and OpenApi, input control in apps and in server that checks valid JSON and payload size. Vue and React framework have events disabled and are replaced by event delegation. Vue and React are controlled to only be able to mount pure HTML. Server and IAM request control blocks user if too many errors or suspicious activity in requests. Project directive follows to use own developed safe and refactored code of popular third party solutions without any third party dependencies with some progressive refactored usage of Vue and React.|
|1.3.2      |1    |**Implemented**. Eval() function not implemented.|
|1.3.3      |2    |**Implemented**. Server controls input of valid characters, payload size and valid JSON|
|1.3.4      |2    |**Implemented**. All SVG are without links, scripts or any other tag not needed.|
|1.3.5      |2    |**Implemented**. &ltscript&gt and &ltstyle&gt tags are replaced by secure REST API including fonts with the exception of maintenance of server error message when server is not available for apps. Apps must load all assets using encrypted REST API and custom Web Crypto API. Adoptedstylesheet implemented for common styles.|
|1.3.6      |2    |**Implemented**. Uses OpenApi that validates server configuration and paths accessed. IAM controls requests for any supicious behaviour including limited attempts to access invalid paths.|
|1.3.7      |2    |**Implemented**. Server does not render content from user input. Apps uses Vue SFC pattern in client|
|1.3.8      |2    |**Not aplicable**. Java and JNDI are not implemented.|
|1.3.9      |2    |**Implemented**. Uses tree shaking pattern, OpenAPI and IAM request control.ORM pattern database authenticates data constraints.|
|1.3.10     |2    |**Implemented**. Input control in apps and in server. Server auhenticates valid JSON and payload size. Tree shaking pattern in both apps and in server.|
|1.3.11     |2    |**Implemented**. OpenApi, IAM request control, tree shaking pattern. SMTP or IMAP not implemented and replaced with own Email solution using Message queue pattern without any third party dependency.|
|1.3.12     |3    |**Implemented**. IAM request control including rate limiter|
|1.4.1      |2    |**Implemented**. Payload size control in server. Server error management of any unknown error.|
|1.4.2      |2    |**Implemented**. IAM request control of valid JSON and payload size and server error management of any unknown error. Common server function to convert expected number input from string to number|
|1.4.3      |2    |**Implemented**. Strict Javascript ESM implemented and all modules loaded when needed only. Stateless directive implemented. Common library in apps cleans up frameworks after switching between Vue, React and pure javascript.|
|1.5.1      |1    |**Not aplicable**. XML not used except server fetched SVG where all links and scripts are removed.|
|1.5.2      |2    |**Implemented**. Input control in apps and in server that allow only JSON from apps that is validated in server, tree shaking pattern and OpenApi parameter control. All server requests must use base64, encryption using Web Crypto API pattern and use Frontend For backend (FFB) and Backend for Frontend (BFF)|
|1.5.3      |3    |**Implemented**. All code supports Unicode, uses JSON.parse() and JSON.stringify() and use centralized BFF and IAM request control to control all inputs from apps.|

**V2 Validation and Business Logic**
|{#2kv}Requirement|Level|Status|
|:----------|:----|:-----|
|2.1.1      |1    |**Implemented**. Uses OpenApi and integrated JSDoc comments in presentation app that explains input validation rules.|
|2.1.2      |2    |**Implemented**. Uses OpenApi and integrated JSDoc comments in presentation app that explains how to validate combined data.|
|2.1.3      |2    |**Implemented**. Uses OpenApi and integrated JSDoc comments in presentation app that explains business logic limits and validations at user level and global level.|
|2.2.1      |1    |**Implemented**. Uses OpenApi and ORM database constraints  at object level and in data model level to enforce business and functional expectations.|
|2.2.2      |1    |**Implemented**. Uses OpenApi and ORM database constraints  at object level and in data model level in server as trusted service layer. Some basic input control is used in apps.|
|2.2.3      |2    |**Implemented**. Uses OpenApi, role based REST API, IAM request control, IAM resource access control and ORM database constraints to ensure combination of related data items are reasonable according to predefined rules.|
|2.3.1      |1    |**Implemented**. Uses OpenApi, IAM, and ORM database constraints to process business logic flow for the same user in sequential order without skipping any step.|
|2.3.2      |2    |**Implemented**. Uses OpenApi and JSDoc comments to document business logic limits|
|2.3.3      |2    |**Not Implemented**. Entire transaction to be implemented. At the moment only last ORM statemented is rollbacked|
|2.3.4      |2    |**Implemented**. Database lock, transaction, rollback, commmit and race condition pattern implemented|
|2.3.5      |3    |**Implemented**. Multi user approval in shop and bank app. The buyer is waiting in the shop app for the bank user to approve the payment request|
|2.4.1      |2    |**Implemented**. Rate limiter implemented that blocks user causing too many requests, too many errors, trying to access invalid paths too much or because of other suspiscious activity. Admin, logged in users and anonymous users have different IAM parameters to set desired rate limiter rules |
|2.4.2      |3    |**Implemented**. Rater limiter implemented controlling too many requests with parameters to set custom rules|

**V3 Web Frontend Security**
|{#2kv}Requirement|Level|Status|
|:----------|:----|:-----|
|3.1.1      |3    |**Implemented**. Uses OpenApi and JSDoc documentation integrated with servers configured and used as rules including protocol, Content Security Policy, JSON Web token, IAM request control, Web Crypto API. Presentation app specifies all security features implemented including comparison tables with common popular third party security solutions.|
|3.2.1      |1    |**Implemented**. All browser content must be fetched using custom encrypted REST API using Web Crypto API pattern including all assets so app functions control how decrypted content should be rendered and thus avoid relying on different browsers different behaviour depending supported features for different versions, platform and user-agents.Controls sec-fetch-dest, sec-fetch-mode and sec-fetch-site request headers for every browser CSS font url request|
|3.2.2      |1    |**Implemented**. Uses TextContent to update and read text directly when text is expected. createTextNode() is not used to avoid unnecessary obscure functionality.|
|3.2.3      |1    |**Implemented**. Uses Vue SFC pattern to separate HTML, CSS and Javascript that includes type declaration and uses data closure pattern and no global variables in window object. Uses data attribute on divs to identify columns or records on Vue SFC pattern mounted components. Uses ES modules and separates namespace using either app or common in apps without using window object or any global variable in the browser.|
|3.3.1      |1    |**Not aplicable**. Project uses stateless directive and cookies are not allowed. Token variables, unique app instance encryption keys and browser fingerprint data are used in server authentication instead of any client authentication relying on different browsers different behaviour depending supported features for different versions, platform and user-agents.|
|3.3.2      |1    |**Not aplicable**. Browser security features including HTTPS and SSL replaced with own customizable Web Crypto API pattern solution.|
|3.3.3      |1    |**Not aplicable**. See 3.3.1.|
|3.3.4      |1    |**Not aplicable**. See 3.3.1.|
|3.3.5      |1    |**Not aplicable**. See 3.3.1.|
|3.4.1      |1    |**Not aplicable**. Browser security features including HTTPS and SSL are replaced with own customizable Web Crypto API pattern solution so HSTS feature is not used.|
|3.4.2      |1    |**Not aplicable**. Access-Control-Allow-Origin feature is not used.|
|3.4.3      |2    |**Not implemented**.  Uses Content-Security-Policy.However object-src 'self' data: and base-uri:'self' is used. A per-response policy with nonces or hashes is not defined.|
|3.4.4      |2    |**Not aplicable**. x-content-type-options feature is not used. See 3.2.1 and 4.1.1|
|3.4.5      |2    |**Implemented**. referrer-policy = strict-origin-when-cross-origin is used for all responses.|
|3.4.6      |2    |**Implemented**. Content-Security-Policy frame-ancestors 'self' and x-frame-options = SAMEORIGIN are used.|
|3.4.7      |3    |**Not implemented**. Location not implemented in Content-Security-Policy.|
|3.4.8      |3    |**Implemented**. cross-origin-opener-policy = same-origin is used in response always|
|3.5.1      |1    |**Implemented**. App Id token, any app access token, app instance unique encryption keys and browser fingerprint are all authenticated in server for each request together with cross-origin-opener-policy = same-origin, cross-origin-resource-policy = same-origin and referrer-policy = strict-origin-when-cross-origin for all responses. Server can only accept requests from either one encrypted REST API endpoint or one encrypted CSS font url endpoint only.|
|3.5.2      |1    |**Implemented**. Does not rely on CORS preflight mechanism. It is not possible to call any functionality without being authenticated in server and using the only two allowed public encrypted endpoints. See 3.5.1|
|3.5.3      |1    |**Implemented**. Uses OpenApi to control allowed paths and methods used and allows POST, PUT, PATCH, DELETE and GET methods in server decrypted REST API not available in public requests. Public REST API only use POST method to manipulate data and to fetch images, css and javascript for all encrypted requests and browser GET method for CSS font url where encrypted server side message (SSE) with secure font REST API fetch that uses POST method replaces unsecure browser font loading|
|3.5.4      |2    |**Not aplicable**. Apps use same host and use same common library and implements single sign on pattern and single page application (SPA) multi app. Microservices are implemented on separate servers being on same or different host.However these can only be accessed by the server. |
|3.5.5      |2    |**Not applicable**. Postmessage in client is not implemented. Postmessage in server is used in worker_thread to solve cube state for complex Kocimeba algorithm calculations and not in client. |
|3.5.6      |3    |**Implemented**. JSONP is not enabled and not implemented.|
|3.5.7      |3    |**Implemented**. Script resource must use encrypted REST API so no data authorization in script resource responses|
|3.5.8      |3    |**Implemented**. All assets must use encrypted REST API when Vue SFC pattern component is used and is mounting the component when intended.See 3.5.1|
|3.6.1      |3    |**Implemented**. Client side assets must be fetched using encrypted REST API and in the same server and assets are modified in realtime with removed comments, ESM support for React and images returned as base64 strings. All assets are cached as variable using closure pattern in app replacing browser cache functionalty relying on different browsers different behaviour depending supported features for different versions, platform and user-agents. Project directive is not to use any third party dependencies due to security, consistent app behaviour in all browsers and to implement refactored solutions of popular third party solutions.|
|3.7.1      |2    |**Implemented**. Does not use NSAPI plugins, Flash, Shockwave, ActiveX, Silverlight, NACL or client side java applets. Does not use semantic HTML with obscure functionality and different user-agent default styles. Does not use any user agent CSS. Replaces restricted Web Crypto Api with customizable Web Crypto Api opens source pattern without restrictions and algorithm optimized for performance. Replaces unsecure EventSource with encrypted WritableStream piped to client socket|
|3.7.2      |2    |**Not aplicable**. Request is not redirected and not allowed. Instead HTTP errors 401 is returned for any invalid request. User must use main app or admin server host without any paths more than allowed encrypted endpoints. See 3.5.1|
|3.7.3      |3    |**Not aplicable**. See 3.7.2 |
|3.7.4      |3    |**Not aplicable**. HST and TLS are not used. Project does not allow the use of HTTPS. See 1.2.2 and 3.2.1 and about customizable Web Crypto API pattern implemented.|
|3.7.5      |3    |**Implemented**. Apps and server behave as documented and implemented using OpenApi, JSDoc comments and IAM pattern using ES6+ Javascript. Browsers not supporting ES6+ are not supported and explained in documentation comparing transpilers, build step and polyfill with implementation.|


**V4 API and Web Service**
|{#2kv}Requirement|Level|Status|
|:----------|:----|:-----|
|4.1.1      |1    |**Implemented**. All responses contains either `application/json; charset=utf-8`, `text/html; charset=utf-8` or `text/plain; charset=utf-8` (only for IAM request control error message or for robots.txt requests) in `Content-Type` .|
|4.1.2      |2    |**Not applicable**. No redirect allowed. Project does not allow the use of HTTPS to avoid leakage to OCSP third party servers and third party to control encryption. See 1.2.2 and 3.2.1 and about customizable Web Crypto API pattern implemented.|
|4.1.3      |2    |**Implemented**. Backend for frontend (BFF) and Backend for external (BFE) use x-forwarded-for and other browser fingerprint data in server|
|4.1.4      |3    |**Implemented**. GET, POST, PUT, PATCH, DELETE are the only methods allowed in server and controlled by IAM and blocked if too many failed requests. OpenApi makes sure only encrypted POST REST API and encrypted CSS font url GET requests are allowed from client. See also 3.5.3|
|4.1.5      |3    |**Implemented**. Shop app uses a unique signature for each payment request sent to the bank app and user must authorize the payment request manually in the bank app. Each app instances use unique encryption keys and are validate in server with fingerprint data from browser. Restarting app generates new unique encryption keys.|
|4.2.1      |2    |**Implemented**. Transfer encoding and Content-length are not used. The incoming messages are 100% encrypted and validated using app instance encryption keys only.|
|4.2.2      |3    |**Not aplicable**. See 4.2.1.|
|4.2.3      |3    |**Not aplicable**. HTTP/2 and HTTP/3 are not used.|
|4.2.4      |3    |**Not aplicable**. See 4.2.3.|
|4.2.5      |3    |**Implemented**.  Server REST API is using ISO20022 including customizable record limit logic. IAM blocks user if too many invalid requests or too mnay requests.|
|4.3.1      |2    |**Not aplicable**.  GraphQL replaced by ORM pattern.|
|4.3.2      |2    |**Not aplicable**.  GraphQL replaced by ORM pattern.|
|4.4.1      |1    |**Not aplicable**.  Websocket not used.|
|4.4.2      |2    |**Not aplicable**.  Websocket not used.|
|4.4.3      |2    |**Not aplicable**.  Websocket not used.|
|4.4.4      |2    |**Not aplicable**.  Websocket not used.|

**V5 File Handling**
|{#2kv}Requirement|Level|Status|
|:----------|:----|:-----|
|...|||

**V6 Authentication**
|{#2kv}Requirement|Level|Status|
|:----------|:----|:-----|
|...|||

**V7 Session Management**
|{#2kv}Requirement|Level|Status|
|:----------|:----|:-----|
|...|||

**V8 Authorization**
|{#2kv}Requirement|Level|Status|
|:----------|:----|:-----|
|...|||

**V9 Selfâ€‘contained Tokens**
|{#2kv}Requirement|Level|Status|
|:----------|:----|:-----|
|...|||

**V10 OAuth and OIDC**
|{#2kv}Requirement|Level|Status|
|:----------|:----|:-----|
|...|||

**V11 Cryptography**
|{#2kv}Requirement|Level|Status|
|:----------|:----|:-----|
|...|||

**V12 Secure Communication**
|{#2kv}Requirement|Level|Status|
|:----------|:----|:-----|
|...|||

**V13 Configuration**
|{#2kv}Requirement|Level|Status|
|:----------|:----|:-----|
|...|||

**V14 Data Protection**
|{#2kv}Requirement|Level|Status|
|:----------|:----|:-----|
|...|||

**V15 Secure Coding and Architecture**
|{#2kv}Requirement|Level|Status|
|:----------|:----|:-----|
|...|||

**V16 Security Logging and Error Handling**
|{#2kv}Requirement|Level|Status|
|:----------|:----|:-----|
|...|||

**V17 WebRTC**
|{#2kv}Requirement|Level|Status|
|:----------|:----|:-----|
|...|||
