# REST API

## REST API summary

- ISO20022
- OWASP guidelines for security 
- IAM pattern to authenticate resources
- openAPI pattern using REST API JSON syntax

## REST API URI implementation

[protocol]://[subdomain].[domain]/[backend for frontend (bff)]/[role authorization]/version/[resource collection/service]/[resource]/[optional resource id]?[URI query]

All REST API paths can only be accessed from an app with dynamic ID token created for the specific app instance in the browser.

All REST API paths use backend for frontend (bff) pattern and are grouped by role

Paths can be access from all subdomains except admin paths only available from admin app

|Role                  |Comment                                                     |
|:---------------------|:-----------------------------------------------------------|
|app_id                |Authorized without begin logged in                          |
|app_id_signup         |Same as app_id and checks if signup is enabled              |
|app                   |Same as app_id but used for app assets                      |
|app_access            |Authorized when a user is logged in                         |
|admin                 |Authorized when admin is logged in                          |
|app_external          |Authorized for external url and sending encrypted messages  |
|iam_user              |Authenticates user login in IAM                             |
|iam_provider          |Authenticates provider user login in IAM                    |
|iam_admin             |Authenticates admin login in IAM                            |
|socket                |Authorized for EventSource and server side events           |

## REST API using openAPI pattern

@{CONFIG_REST_API}

## REST API functions

The REST API function uses tag `@namespace REST_API`
All functions used by REST API paths are specified in the openAPI key `operationId` and these functions use tag `@memberof REST_API`.
Project implements non unique operationId so many paths can refer to same operationId.
Syntax for operationId: [path].[filename].[functioname] or [path]_[path].[filename].[functioname]

Paths and method are unique.

List of functions used by REST API

@{REST_API_FUNCTIONS}