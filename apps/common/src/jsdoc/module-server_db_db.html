<div class='section'>

<div class='header'>
    
        
            
        
    
</div>

<div id ='article'>
    <div class="container-overview">
    
        
            <div class="description"><p>Tables implemented using object mapping relation (ORM) pattern
each table has dbModel*.js file with methods
not implemented for tables:
app (fileModelApp is used)
app_setting_type
app_data_translation
app_translation
event
event_status
event_type
language
since dml logic not implemented and some SQL use select from these tables using joins</p></div>
        

        
            















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><div class='ul'><div class='li'>
        <a href="server_db_db.js.html">server/db/db.js</a>, <a href="server_db_db.js.html#line1">line 1</a>
    </div></div></dd>
    

    

    

    
</dl>




















        
    
    </div>

    

    

    

    

    

    

    
        <div class='title_h3'>Members</div>

        
            
<div class='title_h4'><span class="type-signature">(inner, constant) </span>DB_POOL<span class="type-signature"></span></div>




<div class="description">
    <p>DB_POOL
All database pool connections are saved here
Oracle uses number to</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><div class='ul'><div class='li'>
        <a href="server_db_db.js.html">server/db/db.js</a>, <a href="server_db_db.js.html#line39">line 39</a>
    </div></div></dd>
    

    

    

    
</dl>






        
            
<div class='title_h4'><span class="type-signature">(inner, constant) </span>fileModelConfig<span class="type-signature"></span></div>










<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><div class='ul'><div class='li'>
        <a href="server_db_db.js.html">server/db/db.js</a>, <a href="server_db_db.js.html#line28">line 28</a>
    </div></div></dd>
    

    

    

    
</dl>






        
            
<div class='title_h4'><span class="type-signature">(inner) </span>params[undefined]<span class="type-signature"></span></div>










<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><div class='ul'><div class='li'>
        <a href="server_db_db.js.html">server/db/db.js</a>, <a href="server_db_db.js.html#line372">line 372</a>
    </div></div></dd>
    

    

    

    
</dl>






        
    

    
        <div class='title_h3'>Methods</div>

        
            

    

    
    <div class='title_h4'><span class="type-signature">(inner) </span>dbPoolClose<span class="signature">(pool_id, db_use, dba)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></div>
    

    



<div class="description">
    <p>Delete pool for given database</p>
</div>









    <div class='title_h5'>Parameters:</div>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>pool_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type">null</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>db_use</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type">null</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>dba</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><div class='ul'><div class='li'>
        <a href="server_db_db.js.html">server/db/db.js</a>, <a href="server_db_db.js.html#line234">line 234</a>
    </div></div></dd>
    

    

    

    
</dl>















<div class='title_h5'>Returns:</div>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    





        
            

    

    
    <div class='title_h4'><span class="type-signature">(inner) </span>dbPoolDeleteAll<span class="signature">(db)</span><span class="type-signature"> &rarr; {void}</span></div>
    

    



<div class="description">
    <p>Delete all pools for given database
Deletes variable content, not the same as
using API to close, release or end connection
and all database API use different logic.
Needed to restart database connection after admin
have changed parameters and without having to restart server</p>
</div>









    <div class='title_h5'>Parameters:</div>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>db</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><div class='ul'><div class='li'>
        <a href="server_db_db.js.html">server/db/db.js</a>, <a href="server_db_db.js.html#line60">line 60</a>
    </div></div></dd>
    

    

    

    
</dl>















<div class='title_h5'>Returns:</div>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
            

    

    
    <div class='title_h4'><span class="type-signature">(inner) </span>dbPoolGet<span class="signature">(pool_id, db_use, dba)</span><span class="type-signature"> &rarr; {object|string|null}</span></div>
    

    



<div class="description">
    <p>Get pool for database</p>
</div>









    <div class='title_h5'>Parameters:</div>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>pool_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type">null</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>db_use</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>dba</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type">null</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><div class='ul'><div class='li'>
        <a href="server_db_db.js.html">server/db/db.js</a>, <a href="server_db_db.js.html#line267">line 267</a>
    </div></div></dd>
    

    

    

    
</dl>















<div class='title_h5'>Returns:</div>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">object</span>
|

<span class="param-type">string</span>
|

<span class="param-type">null</span>


    </dd>
</dl>

    





        
            

    

    
    <div class='title_h4'><span class="type-signature">(inner) </span>dbPoolStart<span class="signature">(dbparameters)</span><span class="type-signature"> &rarr; {Promise.&lt;null>}</span></div>
    

    



<div class="description">
    <p>Pool start
parameters:
use:                     1-5
pool_id:                 start with 0 and increase pool id value +1 for each new pool where pool will be saved
port:                    port,
host:                    host,
dba:                     1/0,
user:                    username,
password:                password,
database:                database,</p>
<pre><code>           db 1 + 2 parameters      see MariaDB/MySQL documentation
           charset:                 character set,
           connnectionLimit:        connection limit

           db 3 parameters          see PostgreSQL documentation
           connectionTimeoutMillis: connection timout milliseconds
           idleTimeoutMillis:       idle timeout milliseconds
           max:                     max

           db 4 parameters          see Oracle documentation
           connectString:           connectstring
           poolMin:                 pool min
           poolMax:                 pool max
           poolIncrement:           pool increment
</code></pre>
</div>









    <div class='title_h5'>Parameters:</div>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>dbparameters</code></td>
            

            <td class="type">
            
                
<span class="param-type">server_db_db_pool_parameters</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><div class='ul'><div class='li'>
        <a href="server_db_db.js.html">server/db/db.js</a>, <a href="server_db_db.js.html#line80">line 80</a>
    </div></div></dd>
    

    

    

    
</dl>















<div class='title_h5'>Returns:</div>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;null></span>


    </dd>
</dl>

    





        
            

    

    
    <div class='title_h4'><span class="type-signature">(inner) </span>dbSQL<span class="signature">(pool_id, db_use, sql, parameters, dba)</span><span class="type-signature"> &rarr; {Promise.&lt;*>}</span></div>
    

    



<div class="description">
    <p>Execute query for given database
Common optional parameters:
DB_RETURN_ID
Returns new inserted id from table if used for given column in the parameter
DB_CLOB
Sets CLOB attributes if used
contains array of columns with CLOB datatype</p>
<pre><code>           All databases return same metadata keys
           INSERT:
           result.insertId
           INSERT, DELETE, UPDATE:
           result.affectedRows 

           Conversion functions are implemented to support same parameter syntax inside SQL for all databases
           and supports ':' before parameter in the SQL
</code></pre>
</div>









    <div class='title_h5'>Parameters:</div>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>pool_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type">null</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>db_use</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type">null</span>


            
            </td>

            

            

            <td class="description last"><p>1 MariaDB
- 2 MySQL
- 3 PostgreSQL
- 4 Oracle
- 5 SQLite</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>sql</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>parameters</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last"><p>can have an extra DB_RETURN_ID and DB_CLOB key</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>dba</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>
|

<span class="param-type">null</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><div class='ul'><div class='li'>
        <a href="server_db_db.js.html">server/db/db.js</a>, <a href="server_db_db.js.html#line511">line 511</a>
    </div></div></dd>
    

    

    

    
</dl>















<div class='title_h5'>Returns:</div>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;*></span>


    </dd>
</dl>

    





        
            

    

    
    <div class='title_h4'><span class="type-signature">(inner) </span>dbSQLParamConvert<span class="signature">(db, connection, parameterizedSql)</span><span class="type-signature"> &rarr; {Object}</span></div>
    

    



<div class="description">
    <p>Converts SQL syntax and parameters depending what database is used</p>
<pre><code>         common syntax used and also used by Oracle that should be converted:
                 SQL:        UPDATE [table] SET [column] = :title&quot; 
                 parameters: { title: &quot;value&quot; }

         postgreSql syntax:   
                 SQL:        UPDATE [table] SET [column] = $1&quot;
                 parameters: [0, &quot;value&quot;]
                 uses unique index with $1, $2 etc, parameter can be used several times
                 example: sql with parameters :id, :id, :id and :id2, will get $1, $1, $1 and $2
                 use indexorder received from parameters

         MariaDB + mySql syntax:
                 SQL:        UPDATE [table] SET [column] = ?&quot;
                 parameters: [&quot;value&quot;]
                 solution implemented here is to set values in the sql
                 using connection?.escape(params[key]) syntax
                 to avoid SQL injection and without having to use ? syntax
                 that requires specific parameter order but a parameter key
                 is only allowed to occur once in this implementation

         SQLite syntax:       
                 SQL:        UPDATE [table] SET [column] = $title&quot;
                 parameters: [$title, &quot;value&quot;]
</code></pre>
</div>









    <div class='title_h5'>Parameters:</div>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>db</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>connection</code></td>
            

            <td class="type">
            
                
<span class="param-type">server_db_db_pool_connection_1_2</span>
|

<span class="param-type">null</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>parameterizedSql</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code></code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><div class='ul'><div class='li'>
        <a href="server_db_db.js.html">server/db/db.js</a>, <a href="server_db_db.js.html#line308">line 308</a>
    </div></div></dd>
    

    

    

    
</dl>















<div class='title_h5'>Returns:</div>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>


    </dd>
</dl>

    





        
            

    

    
    <div class='title_h4'><span class="type-signature">(inner) </span>dbSQLResultConvert<span class="signature">(db, result, fields)</span><span class="type-signature"></span></div>
    

    



<div class="description">
    <p>Sets common attributes for SQL execution result:
insertId       returns id of inserted row
affectedRows   returns number of updated, inserted or deleted rows</p>
</div>









    <div class='title_h5'>Parameters:</div>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>db</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>result</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>fields</code></td>
            

            <td class="type">
            
                
<span class="param-type">server_db_db_pool_connection_3_fields</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><div class='ul'><div class='li'>
        <a href="server_db_db.js.html">server/db/db.js</a>, <a href="server_db_db.js.html#line434">line 434</a>
    </div></div></dd>
    

    

    

    
</dl>




















        
    

    

    
</div>

</div>