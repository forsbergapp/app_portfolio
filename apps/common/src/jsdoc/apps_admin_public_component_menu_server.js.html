



    
    <div class='section'>
        <div class='article'>
            <pre class="prettyprint source linenums"><code>/**
 * Displays stat of users
 * @module apps/admin/component/menu_server
 */

/**
 * @import {CommonModuleCommon, COMMON_DOCUMENT,CommonComponentLifecycle}  from '../../../common_types.js'
 */

/**
 * @name template
 * @description Template
 * @function
 * @param {{function_seconds_to_time:function,
 *          server_info:{os:{   hostname:string,
 *                              cpus:{length:number},
 *                              arch:string,
 *                              freemem:number,
 *                              totalmem:number,
 *                              platform:string,
 *                              type:string,
 *                              release:string,
 *                              version:string,
 *                              uptime:number,
 *                              homedir:string,
 *                              tmpdir:string,
 *                              userinfo:{username:string, homedir:string}
 *                          },
 *                       process:{  memoryusage_rss:string,
 *                                  memoryusage_heaptotal:number,
 *                                  memoryusage_heapused:number,
 *                                  memoryusage_external:number,
 *                                  memoryusage_arraybuffers:number,
 *                                  uptime:number,
 *                                  version:string,
 *                                  path:string,
 *                                  start_arg_0:string,
 *                                  start_arg_1:string}}|null}} props
 * @returns {string}
 */
const template = props => ` &lt;div id='menu_server_content_widget1' class='widget'>
                                &lt;div id='menu_server_os_title' class='common_icon'>&lt;/div>
                                &lt;div id='menu_server_os_info'>
                                    ${props.server_info?
                                        `&lt;div id='menu_server_os_info_hostname_title'>HOSTNAME&lt;/div>&lt;div id='menu_server_os_info_hostname_data'>${props.server_info.os.hostname}&lt;/div>
                                        &lt;div id='menu_server_os_info_cpus_title'>${'CPUS'}&lt;/div>&lt;div id='menu_server_os_info_cpus_data'>${props.server_info.os.cpus.length}&lt;/div>
                                        &lt;div id='menu_server_os_info_arch_title'>${'ARCH'}&lt;/div>&lt;div id='menu_server_os_info_arch_data'>${props.server_info.os.arch}&lt;/div>
                                        &lt;div id='menu_server_os_info_freemem_title'>${'FREEMEM'}&lt;/div>&lt;div id='menu_server_os_info_freemem_data'>${props.server_info.os.freemem}&lt;/div>
                                        &lt;div id='menu_server_os_info_totalmem_title'>${'TOTALMEM'}&lt;/div>&lt;div id='menu_server_os_info_totalmem_data'>${props.server_info.os.totalmem}&lt;/div>
                                        &lt;div id='menu_server_os_info_platform_title'>${'PLATFORM'}&lt;/div>&lt;div id='menu_server_os_info_platform_data'>${props.server_info.os.platform}&lt;/div>
                                        &lt;div id='menu_server_os_info_type_title'>${'TYPE'}&lt;/div>&lt;div id='menu_server_os_info_type_data'>${props.server_info.os.type}&lt;/div>
                                        &lt;div id='menu_server_os_info_release_title'>${'RELEASE'}&lt;/div>&lt;div id='menu_server_os_info_release_data'>${props.server_info.os.release}&lt;/div>
                                        &lt;div id='menu_server_os_info_version_title'>${'VERSION'}&lt;/div>&lt;div id='menu_server_os_info_version_data'>${props.server_info.os.version}&lt;/div>
                                        &lt;div id='menu_server_os_info_uptime_title'>${'UPTIME'}&lt;/div>&lt;div id='menu_server_os_info_uptime_data'>${props.function_seconds_to_time(props.server_info.os.uptime)}&lt;/div>
                                        &lt;div id='menu_server_os_info_homedir_title'>${'HOMEDIR'}&lt;/div>&lt;div id='menu_server_os_info_homedir_data'>${props.server_info.os.homedir}&lt;/div>
                                        &lt;div id='menu_server_os_info_tmpdir_title'>${'TMPDIR'}&lt;/div>&lt;div id='menu_server_os_info_tmpdir_data'>${props.server_info.os.tmpdir}&lt;/div>
                                        &lt;div id='menu_server_os_info_userinfo_username_title'>${'USERNAME'}&lt;/div>&lt;div id='menu_server_os_info_userinfo_username_data'>${props.server_info.os.userinfo.username}&lt;/div>
                                        &lt;div id='menu_server_os_info_userinfo_homedir_title'>${'USER HOMEDIR'}&lt;/div>&lt;div id='menu_server_os_info_userinfo_homedir_data'>${props.server_info.os.userinfo.homedir}&lt;/div>`:''
                                    }
                                &lt;/div>
                            &lt;/div>
                            &lt;div id='menu_server_content_widget2' class='widget'>
                                &lt;div id='menu_server_process_title' class='common_icon'>&lt;/div>
                                &lt;div id='menu_server_process_info'>
                                ${props.server_info?
                                    `&lt;div id='menu_server_process_info_memoryusage_rss_title'>${'MEMORY RSS'}&lt;/div>&lt;div id='menu_server_process_info_memoryusage_rss_data'>${props.server_info.process.memoryusage_rss}&lt;/div>
                                    &lt;div id='menu_server_process_info_memoryusage_heaptotal_title'>${'MEMORY HEAPTOTAL'}&lt;/div>&lt;div id='menu_server_process_info_memoryusage_heaptotal_data'>${props.server_info.process.memoryusage_heaptotal}&lt;/div>
                                    &lt;div id='menu_server_process_info_memoryusage_heapused_title'>${'MEMORY HEAPUSED'}&lt;/div>&lt;div id='menu_server_process_info_memoryusage_heapused_data'>${props.server_info.process.memoryusage_heapused}&lt;/div>
                                    &lt;div id='menu_server_process_info_memoryusage_external_title'>${'MEMORY EXTERNAL'}&lt;/div>&lt;div id='menu_server_process_info_memoryusage_external_data'>${props.server_info.process.memoryusage_external}&lt;/div>
                                    &lt;div id='menu_server_process_info_memoryusage_arraybuffers_title'>${'MEMORY ARRAYBUFFERS'}&lt;/div>&lt;div id='menu_server_process_info_memoryusage_arraybuffers_data'>${props.server_info.process.memoryusage_arraybuffers}&lt;/div>
                                    &lt;div id='menu_server_process_info_uptime_title'>${'UPTIME'}&lt;/div>&lt;div id='menu_server_process_info_uptime_data'>${props.function_seconds_to_time(props.server_info.process.uptime)}&lt;/div>
                                    &lt;div id='menu_server_process_info_version_title'>${'NODEJS VERSION'}&lt;/div>&lt;div id='menu_server_process_info_version_data'>${props.server_info.process.version}&lt;/div>
                                    &lt;div id='menu_server_process_info_path_title'>${'PATH'}&lt;/div>&lt;div id='menu_server_process_info_path_data'>${props.server_info.process.path}&lt;/div>
                                    &lt;div id='menu_server_process_info_start_arg_0_title'>${'START ARG 0'}&lt;/div>&lt;div id='menu_server_process_info_start_arg_0_data'>${props.server_info.process.start_arg_0}&lt;/div>
                                    &lt;div id='menu_server_process_info_start_arg_1_title'>${'START ARG 1'}&lt;/div>&lt;div id='menu_server_process_info_start_arg_1_data'>${props.server_info.process.start_arg_1}&lt;/div>`:''
                                }
                                &lt;/div>
                            &lt;/div>` ;
/**
 * @name component
 * @description Component
 * @function 
 * @param {{ data:{      commonMountdiv:string},
 *           methods:{   COMMON_DOCUMENT:COMMON_DOCUMENT,
 *                       commonFFB:CommonModuleCommon['commonFFB']},
 *           lifecycle:  null}} props 
 * @returns {Promise.&lt;{ lifecycle:CommonComponentLifecycle, 
 *                      data:null, 
 *                      methods:null,
 *                      template:string}>}
 */
const component = async props => {
   /**
     * Seconds to time string
     * @param {number} seconds 
     * @returns {string}
     */
   const seconds_to_time = (seconds) => {
        let ut_sec = seconds;
        let ut_min = ut_sec/60;
        let ut_hour = ut_min/60;
        
        ut_sec = Math.floor(ut_sec);
        ut_min = Math.floor(ut_min);
        ut_hour = Math.floor(ut_hour);
        
        ut_hour = ut_hour%60;
        ut_min = ut_min%60;
        ut_sec = ut_sec%60;
        return `${ut_hour} Hour(s) ${ut_min} minute(s) ${ut_sec} second(s)`;
    };
    const server_info = await props.methods.commonFFB({path:'/server/info', method:'GET', authorization_type:'ADMIN'})
                            .then((/**@type{string}*/result)=>JSON.parse(result));

   
   return {
       lifecycle:   null,
       data:        null,
       methods:     null,
       template:    template({  function_seconds_to_time:seconds_to_time,
                                server_info:server_info,
                            })
   };
};
export default component;</code></pre>
        </div>
    </div>



