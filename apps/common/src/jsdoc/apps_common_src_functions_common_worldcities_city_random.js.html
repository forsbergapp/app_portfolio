



    
    <div class='section'>
        <div class='article'>
            <pre class="prettyprint source linenums"><code>/**
 * @module apps/common/src/functions/common_worldcities
*/

/**
 * @import {server_server_response,commonWorldCitiesCity} from '../../../../server/types.js'
 * @typedef {server_server_response &amp; {result?:commonWorldCitiesCity}} appFunction
 */

/**
 * @name appFunction
 * @description Get random city from worldcities db
 * @function
 * @param {{app_id:number,
 *          data:null,
 *          user_agent:string,
 *          ip:string,
 *          host:string,
 *          idToken:string, 
 *          locale:string}} parameters
 * @returns {Promise.&lt;appFunction>}
 */
const appFunction = async parameters =>{
    const fs = await import('node:fs');
    /**
     *  Get file
     * @returns {Promise.&lt;commonWorldCitiesCity[]>}
     */
    const getFile = async () =>{
        /**@ts-ignore */
        const PATH = `${import.meta.dirname.replaceAll('\\', '/')}/worldcities`;
        const FILE = 'worldcities.json';
        return fs.promises.readFile(`${PATH}/${FILE}`, 'utf8').then(file=>JSON.parse(file.toString()));
    };
    return {result:await getFile().then(cities=>cities[Math.floor(Math.random() * cities.length - 1)]), type:'JSON'};
    
};
export default appFunction;</code></pre>
        </div>
    </div>



